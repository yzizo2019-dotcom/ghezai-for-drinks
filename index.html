<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h1>

<div id="products-container">
  <div class="product" data-name="ÙƒÙˆÙƒØ§ÙƒÙˆÙ„Ø§" data-price="100" data-image="coke.jpg">
    <h2>ÙƒÙˆÙƒØ§ÙƒÙˆÙ„Ø§</h2>
    <p>Ø³Ø¹Ø±: 100 Ø¯Ø¬</p>
    <input type="number" class="qty" value="1" min="1">
    <button class="btn-add">Ø£Ø¶Ù Ù„Ù„Ø·Ù„Ø¨</button>
  </div>
</div>

<footer>
<p>ğŸŒ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ: <a href="https://youcef213637.github.io/soft-drinks/" target="_blank">Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</a></p>
</footer>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
import { SUPABASE_URL, SUPABASE_ANON_KEY } from "./config.js";

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function sendOrder(item) {
  const { data, error } = await supabase.from("orders").insert([item]);
  if (error) {
    console.error("Error:", error);
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨");
  } else {
    alert("âœ” ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
  }
}

document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product").forEach(card => {
    const button = card.querySelector(".btn-add");
    button.addEventListener("click", () => {
      const qtyInput = card.querySelector(".qty");
      const item = {
        name: card.dataset.name,
        price: Number(card.dataset.price),
        quantity: Number(qtyInput.value) || 1,
        image: card.dataset.image,
        created_at: new Date().toISOString()
      };
      sendOrder(item);
    });
  });
});
</script>
</body>
</html>